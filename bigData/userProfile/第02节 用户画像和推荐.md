# 一、用户画像概述
【用户画像】用来勾画用户（用户背景、特征、性格标签、行为场景等）和联系用户需求与产品设计的，
旨在通过从海量用户行为数据中炼银挖金，尽可能全面细致的抽出一个【用户的信息全貌】，从而帮助解决如何把数据转为商业价值的问题。

## 1.1、用户画像数据来源

用户画像计算引擎的数据流：
```text
【用户行为日志】 ==> 【画像计算结果】 ==> 【用户属性】和【画像更新】 ==> 【用户画像】
```

以电影网站的用户画像分析为例。

用户画像数据来源中连个最终要的数据就是用户属性以及物品属性，
有了这两个，我们就可以从用户-用户、用户-电影、电影-电影三方面展开相应的相似度计算从而实施相应的推荐与应用。

### 1.1.1 用户属性
【用户属性】用来描述一个用户的个性，从而用于与其他用户加以区分，
为实现精准及个性化的推荐，系统通常对每个用户都有一个用户属性的建模，
其中包括用户的基本信息，如用户的性别、年龄、年收入、兴趣爱好、活跃时间、所在城市等。

如果计算得到用户A和用户B的属性相似度较高，那么系统就会认为用户A和用户B是相似用户，
在推荐引擎中，基于邻居用户群的观影喜好推荐给当前用于一些电影。

同时，用户属性还可以用于推荐结果进行过滤和排序，从而优化推荐结果。

### 1.1.2 物品属性
【物品属性】是用来描述一个物品的特点，比如观影，这个影片就会有相应的属性标签，比如动作片、爱情片、导演、主演、上映地区等。
通过对影片属性进行相应的标签化，为后面的推荐提供数据支撑。

# 二、用户画像建模
用户画像建模就是用户信息的标签化，以便为后面的推荐算法提供更精准的语义信息。它的核心是对用户潜在的意图和兴趣进行表示和存储，根据用户的基础信息、视频信息、访问信息、行为偏好等归纳出可读取，可计算的用户模型。用户画像通常包含定性画像和定量画像两个部分，其中定性画像主要包括用户的基本特征、行为刻画、兴趣模型和视频表征等，定量画像主要包括用户基础变量、兴趣偏好等可量化的数据特征。所谓的定量画像就是通过某种可量化的数据特征进行画像，比如某个东西的购买量，点击量等。

## 2.1 用户定量画像
定量画像建模过程中需要重点考虑的是用户画像的颗粒度，
即用户画像应该细化到何种程度，颗粒度越小，用户画像越细，也就更加有利于提高推荐系统的准确性。

然而，也不是越细越好，一方面提高了用户画像建模成本，同时也会导致用户画像的使用性降低，
如何把握好用户画像的颗粒度可以采取问卷调查的方法了解用户的使用场景、关注内容等。
可以通过表单收集捕捉用户行为。

## 2.2 用户定性画像
标签化是用户定性画像的核心。
标签化之后，
首先，计算机可以自动完成【分类统计】功能，
例如，可以统计喜欢科幻类型电影的用户有多少，还可以进一步统计喜欢观看科幻类型电影的人群中男女比例是多少，
其次，计算机也可以根据这些标签进行【深度挖掘】，
例如，可以利用关联规则计算用户年龄和喜欢电影类型的关系，还可以利用聚类算法分析喜欢科类型电影用户的年龄段分布情况。
将标签信息与用户的视频浏览、点播行为数据相结合就可以进一步预测用户的喜好，这对于搜索引擎、广告投放等应用领域都有显著的意义。

一个产品通常会设计4~6个标签代表所有的用户群体。

互联网常用用户标识方法：

| 用户标识方式   | 特点                        | 局限性                      |
|----------|---------------------------|--------------------------|
| Cookie   | 能够标识匿名、未注册用户              | 通常有一定有效期，不易跨浏览器、设备       |
| 注册ID     | 网站的用户标识                   | 用户注册意愿低，需要投入大量推广运营成本     |
| Email    | 互联网早期常用的用户标识方式            | 一个用户可能有多个Email，此标识会损失准确性 |
| 微信、微博、QQ | 互联网共识的第三方登录ID，提供OAuth授权机制 | 标识具有准确性和持久性              |
| 手机号      | 移动端最精确的标识                 | 较难获取到，视产品激励用户意愿          |
| 身份证      | 最官方的标识                    | 难获取到，视产品激励用户意愿           |

**用户定性画像结构：**
- 用户维度
  - 用户特征：姓名、年龄、职业等
  - 用户行为：视频点播、视频浏览等
  - 用户兴趣偏好：观看时间偏好、观看视频类别偏好等
- 视频维度
  - 视频特征：类别、导演、主题等

## 2.3 基于知识的用户定性画像分析
基于知识的用户定性画像分析其【核心思想】是利用本体对用户画像中的标签进行表示、验证、推理和解释等，
具体来说包括用户和视频的标签以及它们之间的关系进行形式化的表述，从语义层面描述视频、用户及其兴趣特征，
主要以观众和视频的相关知识作为画像建模的核心。

本体侧重对特定工程领域中的知识进行建模，提供专业领域中概念的词汇表以及概念间的关系，
是在语义层次上对信息进行的形式化描述。主流的本体开发工具是Protege。
本体描述语言OWL DL。

# 三、群体用户画像分析
【群体用户画像分析】是指【用户间的关联分析】。

群体用户画像分析的流程主要包括：
- 1）、用户画像的获取
- 2）、用户画像相似度计算，根据不同的用户画像计算相互间的相似度，是区分用户群体的重要指标，也是展开用户画像聚类的前提条件。
- 3）、用户画像聚类，根据用户画像间的相似度，将相似的用户画像聚为一类。
- 4）、群体用户画像生成，针对不同类别的用户分别建立有代表性的典型用户画像。

通过群体用户画像分析可以获取需求相近的用户群。

## 3.1 定量相似度计算
定量标签有确定的数值，如用户画像中年龄等数据，其相似度计算相对简单。

对与群体用户画像聚类分析中一组定量标签来说，相似度计算为：
```text
sim(Ui, Uj) = SUM{1, k}(W{k} * sim(profile{k}(Ui), profile{k}(Uj)))
```
其中，W{k}表示第k个定量标签的权重，
profile{k}(Ui)标识用户i在第k个定量标签下的值，
sim(profile{k}(Ui), profile{k}(Uj))表示用户画像Ui和用户画像Uj在第k个定量标签的相似度。
SUM{1, k}是从第1个到第k个标签的权重w与相似度求和。

在计算用户画像相似度的过程中，往往会基于多个定量标签的数据来计算相似度。
值得注意的是，不同定量标签数值的取值范围可能存在数量级别的差异，
从而使得相似度计算过程中，某些定量标签对综合相似度贡献微乎其微。
因此，在计算之前，对不同定量标签的数据进行归一化处理就尤为重要。

### 3.1.1 归一化方式
归一化是物理系统中一种无量纲处理手段。在这里，归一化是将不同取值范围的定量标签数据统一映射到【0，1】区间。
常用的归一化方法有线性函数转换、对数函数转换、反正切函数转换等。

线性函数转换（最小-最大值转换）：
```text
Y = abs((X - X最小值) / (X最大值 - X最小值))
```
其中，X、Y分别标识转换前、后的值。

对数函数转换为：
```text
Y = log10(X)
```

反正切函数转换为：
```text
Y = atan(X)^2 / pi
```

### 3.1.2 计算相似度方法
具体的某个定量标签相似度数值计算应根据具体的用户画像采用不同的计算方式，可以采用欧式距离、余弦相似度、Jaccard系数等。
对于标量标签，通常采用欧氏距离、曼哈顿距离和余弦相似度。

欧式距离，欧几里得距离，是一个通常采用的距离定义，是多维空间中两点的真实距离，其计算公式为：
```text
sim(Ui, Uj) = sqrt(SUM{1, k}((profile{k}(Ui) - profile{k}(Uj))^2))
```

曼哈顿距离，城市街区距离，是两个点在标准坐标系上的绝对轴距的总和，其计算公式为：
```text
sim(Ui, Uj) = SUM{1, k}(abs(profile{k}(Ui) - profile{k}(Uj))))
```

余弦相似度将用户评分看作一个向量，用向量的余弦夹角度量用户间的相似性，其计算公式为：
```text
sim(Ui, Uj) = SUM{1, k}(
    (profile{k}(Ui) / sqrt(SUM{1, k}(profile{k}(Ui)^2))) 
        * 
    (profile{k}(Uj) / sqrt(SUM{1, k}(profile{k}(Uj)^2)))
)
```
然而上述余弦相似性度量方法没有包含用户画像各个标签数值的统计特征。
修正的余弦相似度通过减去群体用户画像各个标签数值的平均值来改善上述缺陷。
```text
sim(Ui, Uj) = SUM{1, k}(
((profile{k}(Ui) - mean_profile(Ui)) / sqrt(SUM{1, k}((profile{k}(Ui) - mean_profile(Ui))^2)))
 * 
((profile{k}(Uj) - mean_profile(Uj)) / sqrt(SUM{1, k}((profile{k}(Uj) - mean_profile(Uj))^2)))
)
```

对于二元变量，即取值只为0和1两种，如果采用以上方法则不能很好地标识其相似度，
因此一种常用的方法是计算Jaccard系数，Jaccard系数计算公式为：
```text
sim(Ui, Uj) = abs(profile(Ui)与profile(Uj)交集 / profile(Ui)与profile(Uj)并集)
```

https://blog.csdn.net/Jorocco/article/details/81428996?spm=1001.2101.3001.6650.3&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-3-81428996-blog-96262851.235%5Ev43%5Epc_blog_bottom_relevance_base3&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7ERate-3-81428996-blog-96262851.235%5Ev43%5Epc_blog_bottom_relevance_base3&utm_relevant_index=4